# 音訊輸出裝置快速切換工具 PRD

## 專案概述
一個 Windows 個人電腦上的輕量級音訊切換工具,整合了 RSS 訂閱管理和本地音樂播放器功能。

---

## 已實現功能

### 🔊 音訊裝置管理
- ✅ 雙裝置快速切換
- ✅ 裝置使用時間追蹤與統計
- ✅ 系統托盤整合與狀態圖示
- ✅ 開機自動啟動
- ✅ 圖形化設定介面

### 📋 RSS 閱讀器
- ✅ RSS 訂閱管理 (新增/移除/重新整理)
- ✅ 三欄式介面設計
- ✅ 已讀/未讀狀態管理
- ✅ 收藏功能
- ✅ 篩選功能 (全部/未讀/收藏)
- ✅ 搜尋功能 (即時搜尋文章)
- ✅ 剪貼簿自動偵測 RSS 連結

### 🎵 音樂播放器
- ✅ 本地音樂播放 (MP3 格式)
- ✅ 基本播放控制 (播放/暫停/上一首/下一首)
- ✅ 播放模式切換 (順序/列表循環/單曲循環/隨機)
- ✅ 音量控制 (持久化儲存)
- ✅ 播放進度追蹤與顯示
- ✅ 專輯封面顯示 (自動載入與快取)
- ✅ 背景播放 (關閉視窗後繼續播放)
- ✅ 系統托盤控制
- ✅ 音樂搜尋 (標題/分類/藝術家)
- ✅ YouTube 下載整合
  - 直接下載 YouTube/YouTube Music 音樂
  - YouTube 搜尋功能 (搜尋並選擇影片)
  - 自動生成 JSON 元數據
  - 分類管理
- ✅ Discord Rich Presence 整合
  - 顯示正在播放的音樂資訊
  - 顯示播放進度與時間
  - 支援播放/暫停狀態更新
- ✅ 樹狀資料夾結構 UI
  - 可展開/收合的資料夾樹狀結構
  - 雙擊歌曲播放,雙擊資料夾展開/收合
  - 右鍵選單:新增/重新命名/刪除資料夾
  - 右鍵選單:播放/刪除歌曲

### 🎨 介面與系統
- ✅ 深色主題 UI (所有視窗統一風格)
- ✅ 完整的日誌系統
- ✅ 模組化架構設計

---

## 待實現功能

### 🎵 音樂播放器增強

#### 🔥 高優先級
- [ ] **拖拉歌曲分類功能** 🆕
  - 在樹狀結構中拖拉歌曲到資料夾進行分類
  - 支援多選歌曲批量移動
  - 視覺化拖拉反饋

- [ ] **播放列表管理**
  - 建立/刪除/重命名播放列表
  - 拖放歌曲到播放列表
  - 播放列表順序調整
  - 播放列表匯入/匯出

#### 🌟 中優先級
- [ ] **播放記錄與統計**
  - 最近播放列表
  - 播放次數統計
  - 最常播放排行榜

#### 💡 低優先級
- [ ] **等化器** - 音訊等化器設定
- [ ] **歌詞顯示** - LRC 歌詞同步顯示
- [ ] **音樂視覺化** - 播放時的視覺效果

---

### 📋 RSS 功能增強

#### 🔥 高優先級
- [ ] **訂閱源分類 UI**
  - 為訂閱源添加分類標籤管理介面
  - 在 RSS 視窗左側增加分類標籤篩選
  - 新增/編輯/刪除分類功能
  - 拖放操作將訂閱源加入分類
  - 後端支援已實現,僅需實作 UI

#### 🌟 中優先級
- [ ] **圖片預覽增強** - 在文章內容中顯示嵌入圖片
- [ ] **進度條優化** - 更詳細的載入進度顯示

#### 💡 低優先級
- [ ] **離線閱讀** - 下載文章內容供離線閱讀
- [ ] **RSS 推送通知** - 新文章桌面通知

---

### 🔊 音訊裝置功能增強

#### 🌟 中優先級
- [ ] **音量快速調整** - 托盤右鍵可調整音量
- [ ] **應用程式別音量控制** - 控制個別應用程式音量

#### 💡 低優先級
- [ ] **音訊設定檔** - 預設不同情境的音訊配置

---

### 🛠️ 系統與介面功能

#### 🌟 中優先級
- [ ] **通知增強**
  - 顯示專輯封面縮圖
  - 通知上直接控制音樂播放
  - 自訂通知顯示時間

- [ ] **備份還原**
  - 一鍵備份所有設定
  - 匯出/匯入設定檔
  - 自動備份機制

#### 💡 低優先級
- [ ] **插件系統** - 支援第三方插件

---

## 技術規格

### 技術棧
- **語言**: Python 3.8+
- **系統托盤**: pystray
- **音訊控制**: pycaw
- **音樂播放**: pygame
- **RSS 解析**: feedparser
- **剪貼簿監控**: pyperclip
- **設定介面**: tkinter
- **圖像處理**: Pillow
- **Discord 整合**: pypresence
- **YouTube 下載**: yt-dlp

### 資料儲存
使用 JSON 設定檔 (config.json) 儲存:
- 音訊裝置設定與統計資料
- RSS 訂閱列表、已讀狀態、收藏列表
- 音樂根目錄路徑與音量設定

---

## 專案結構

```
selftool/
├── main.py                  # 主程式進入點
├── audio_manager.py         # 音訊裝置管理模組
├── config_manager.py        # 設定檔管理模組
├── settings_window.py       # 設定視窗模組
├── stats_window.py          # 統計視窗模組
├── rss_manager.py           # RSS 訂閱管理模組
├── rss_window.py            # RSS 閱讀視窗模組
├── clipboard_monitor.py     # 剪貼簿監控模組
├── music_manager.py         # 音樂管理模組
├── music_window.py          # 音樂播放器視窗模組
├── youtube_downloader.py    # YouTube 下載器模組
├── discord_presence.py      # Discord Rich Presence 模組
├── logger.py                # 日誌記錄模組
├── config.json              # 設定檔 (自動生成)
├── requirements.txt         # Python 依賴套件
├── logs/                    # 日誌資料夾
│   └── app.log              # 應用程式日誌
├── README.md                # 使用說明
├── PRD.md                   # 本文件
└── CHANGELOG.md             # 更新日誌
```

---

## 授權

MIT License
