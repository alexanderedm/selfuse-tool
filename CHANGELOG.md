# 更新日誌

所有重要的專案變更都會記錄在此檔案中。

---

## [未發布]

### 新增
- **樹狀資料夾結構 UI** (音樂播放器)
  - 左側使用 Treeview 顯示資料夾樹狀結構
  - 可展開/收合資料夾查看其中的歌曲
  - 雙擊資料夾展開/收合,雙擊歌曲播放
  - 右鍵選單功能:
    - 新增資料夾
    - 重新命名資料夾
    - 刪除資料夾(含確認對話框)
    - 播放歌曲
    - 刪除歌曲(含確認對話框)
  - 樹狀結構顯示歌曲時長和分類資訊

- **分類選擇對話框優化** (音樂下載)
  - 使用下拉式選單取代手動輸入分類名稱
  - 新增「+ 新增」按鈕快速創建新分類
  - 更直覺的使用者介面
  - 預設選擇第一個可用分類

### 修復
- 修復音樂搜尋功能,現在可以搜尋藝術家名稱
- **修復 YouTube 下載 403 錯誤**:
  - 增強瀏覽器 cookies 讀取邏輯
  - 新增 User-Agent 偽裝
  - 延長 cookies 測試超時時間至 15 秒
  - 當無法讀取 cookies 時顯示警告訊息
  - 提高下載成功率

### 改進
- 重構 PRD 文檔,簡化內容並只保留已做和待做部分
- 創建獨立的更新日誌文檔 (CHANGELOG.md)
- 改進音樂播放器 UI,使用樹狀結構替代原本的平面列表

### 移除
- **移除 Discord Rich Presence 功能**:
  - 刪除 `discord_presence.py` 模組
  - 從音樂播放器移除所有 Discord 整合程式碼
  - 刪除 `DISCORD_SETUP.md` 說明文檔
  - 簡化程式碼,減少依賴套件

---

## [v2.5.0] - 2025-10-12

### 新增
- **音量設定持久化**: 音樂播放器音量設定會自動儲存並在重啟後恢復
- **Discord Rich Presence 整合**:
  - 在 Discord 上顯示正在播放的音樂資訊
  - 顯示歌曲標題、藝術家名稱
  - 顯示播放進度條和剩餘時間
  - 支援播放/暫停狀態更新
  - 需要安裝 pypresence: `pip install pypresence`

### 改進
- **日誌系統優化**: app.log 每次啟動時自動清空,只保留本次運行的紀錄
- **YouTube 下載功能改進**:
  - 修復 HTTP 403 錯誤問題
  - 自動嘗試從瀏覽器讀取 cookies (Chrome/Edge/Firefox)
  - 使用多個客戶端模式避開 bot 檢測
  - 提高下載成功率

---

## [v2.4.0] - 2025-10-12

### 新增
- **YouTube 搜尋功能**:
  - 在下載對話框輸入關鍵字搜尋 YouTube 影片
  - 返回最多 5 個搜尋結果供選擇
  - 顯示影片標題、上傳者、時長資訊
  - 選擇後自動開始下載流程

### 改進
- **專輯封面顯示優化**:
  - 保持原始圖片長寬比,不強制壓縮成正方形
  - 自動適應最大 250px 尺寸
  - 支援長方形和正方形封面

---

## [v2.3.0] - 2025-10-12

### 新增
- **YouTube 下載整合功能**:
  - 在播放器中直接下載 YouTube 音樂
  - 選擇下載到指定分類
  - 支援新增自訂分類
  - 背景執行緒下載避免阻塞介面
  - 自動生成 JSON 元數據
  - 下載完成後自動重新掃描音樂庫
  - 自動檢查 yt-dlp 是否已安裝

### 修復
- 修復托盤圖示未出現的問題

### 移除
- 移除快速切換裝置選單(保持雙裝置切換)

---

## [v2.2.0] - 2025-10-12

### 新增
- **專輯封面顯示功能**:
  - 自動從 thumbnail URL 載入專輯封面
  - 圖片快取機制避免重複下載
  - 預設封面圖示(無縮圖時)

- **播放模式增強功能**:
  - 🔁 單曲循環模式
  - 🔂 列表循環模式
  - 🔀 隨機播放模式
  - ➡️ 順序播放模式

- **音樂搜尋功能**:
  - 即時搜尋歌曲標題和分類
  - 一鍵清除搜尋
  - 支援與分類篩選結合使用

---

## [v2.1.0] - 2025-10-12

### 新增
- **音樂背景播放功能**: 關閉視窗後音樂繼續播放
- **系統托盤音樂控制選單**:
  - ⏯ 播放/暫停
  - ⏭ 下一首
  - ⏮ 上一首
  - ⏹ 停止
- 音樂控制操作顯示系統通知

### 修復
- 修復視窗重新開啟時的播放狀態同步問題

---

## [v2.0.0] - 2025-10-12

### 新增
- **RSS 訂閱管理功能**:
  - RSS 訂閱管理
  - RSS 已讀/未讀狀態管理
  - RSS 收藏功能
  - RSS 篩選和搜尋功能

- **本地音樂播放器**:
  - 本地音樂播放功能
  - 隨機播放模式
  - 播放進度追蹤
  - 藝術家資訊顯示

### 改進
- 改進所有視窗為深色主題
- 新增完整的日誌系統

### 移除
- 移除視窗底部的關閉按鈕

---

## [v1.0.0] - 2025-10-04

### 新增
- 初始版本發布
- 支援雙裝置快速切換
- 系統托盤整合
- 圖形化設定介面
- 開機自啟動功能
- 使用統計功能

---

## 格式說明

本更新日誌遵循 [Keep a Changelog](https://keepachangelog.com/zh-TW/1.0.0/) 格式規範。

版本號遵循 [語義化版本](https://semver.org/lang/zh-TW/) 規範:
- 主版本號:進行不相容的 API 變更時
- 次版本號:新增向下相容的功能時
- 修訂版本號:進行向下相容的問題修正時

### 變更類型
- **新增**: 新功能
- **改進**: 現有功能的改善
- **修復**: 錯誤修正
- **移除**: 移除的功能
- **安全性**: 安全性相關的修正
